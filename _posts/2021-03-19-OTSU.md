# OTSU Thresholding
youtube Ofi1Fn18YLc

## Preliminaries
- Given an image, threshold $t$ separates all the pixels $P_i$ into $C_1$ and $C_2$, where $C_1 = \{P_i \mid P_i \gt t \}$ and $C_2 = \{P_i \mid P_i \leq t \}$
- $W_1$ and $W_2$ are the probabilities of the two classes separated by $t$, where $W_1+W_2=1$
- $V_T$ : total variance
- $V_b$ : between-class variance
- $V_w$ : within-class variance
- $V_T = V_b + V_w$
- $V_1$ : $C_1$ variance
- $V_2$ : $C_2$ variance
- $V_w = W_1 \times V_1 + W_2 \times V_2$
- $\mu_T$ : total mean
- $\mu_1$ : $C_1$ mean
- $\mu_2$ : $C_2$ mean
- $W_1 \times \mu_1 + W_2 \times \mu_2 Ôºù \mu_T$
- $N$ : total pixel count
- $\sum\limits_{i=0}^N{P_i} = N \times \mu_T$

## Definition
- $V_T \\
=\frac{\sum\limits_{i=1}^N{(P_i - \mu_T)^2}}{N} \\
= \frac{\sum\limits_{i=0}^N{({P_i}^2 - 2 \times P_i \times \mu_T + {\mu_T}^2)}}{N}\\
=\frac{(\sum\limits_{i=0}^N{P_i}^2) - {N \times \mu_T}^2}{N}\\
=\frac{\sum\limits_{i=0}^N{P_i}^2}{N} - {\mu_T}^2$

- $V_w \\
= W_1 \times V_1 + W_2 \times V_2 \\
= W_1 \times (\frac{\sum\limits_{P_i \in C_1}{(P_i - \mu_1)^2}}{N \times W_1}) + W_2 \times (\frac{\sum\limits_{P_i \in C_2}{(P_i - \mu_2)^2}}{N \times W_2}) \\
= \frac{\sum\limits_{P_i \in C_1}{(P_i - \mu_1)^2}}{N} + \frac{\sum\limits_{P_i \in C_2}{(P_i - \mu_2)^2}}{N} \\
= \frac{(\sum\limits_{P_i \in C_1}{P_i}^2) - N \times W_1 \times {\mu_1}^2}{N} + \frac{(\sum\limits_{P_i \in C_2}{P_i}^2) - N \times W_2 \times {\mu_2}^2}{N} \\
= \frac{\sum\limits_{P_i \in C_1}{P_i}^2}{N} - W_1 \times {\mu_1}^2 + \frac{\sum\limits_{P_i \in C_2}{P_i}^2}{N} - W_2 \times {\mu_2}^2$

## Vb = ?
- $V_b \\
= V_T - V_w \\
= (\frac{\sum\limits_{i=0}^N{P_i}^2}{N} - {\mu_T}^2) - (\frac{\sum\limits_{P_i \in C_1}{P_i}^2}{N} - W_1 \times {\mu_1}^2 + \frac{\sum\limits_{P_i \in C_2}{P_i}^2}{N} - W_2 \times {\mu_2}^2) \\
= W_1 \times {\mu_1}^2 + W_2 \times {\mu_2}^2 - {\mu_T}^2 \\
= W_1 \times {\mu_1}^2 + W_2 \times  {\mu_2}^2 - 2 \times {\mu_T}^2 + {\mu_T}^2 \\
= W_1 \times {\mu_1}^2 + W_2 \times {\mu_2}^2 - 2 \times (W_1 \times \mu_1 + W_2 \times \mu_2) \times {\mu_T} + (W_1 + W_2) \times {\mu_T}^2 \\
= W_1 \times ({\mu_1}^2 - 2 \times {\mu_1} \times {\mu_T} + {\mu_T}^2) + W_2 \times ({\mu_2}^2 - 2 \times {\mu_2} \times {\mu_T} + {\mu_T}^2) \\
= W_1 \times (\mu_1 - \mu_T)^2 + W_2 \times (\mu_2 - \mu_T)^2$
